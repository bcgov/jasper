name: Build Web
description: Builds the Web codebase

inputs:
  working_directory:
    description: The working directory where the code will be built.
    required: true

runs:
  using: composite
  
  strategy:
    matrix:
      node-version: [12.x]

  steps:
    - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v1
        with:
        node-version: ${{ matrix.node-version }}

    - run: npm ci
        working-directory: ${{env.working_directory}}

    # Lint errors exists from SCC and will be worked on separately.
    - run: npm run lint
        working-directory: ${{env.working_directory}}
        continue-on-error: true

    - run: npm run build
        working-directory: ${{env.working_directory}}

    # Unit test is not configured in SCC and will be worked on separately.
    - run: npm run test --if-present
        working-directory: ${{env.working_directory}}
